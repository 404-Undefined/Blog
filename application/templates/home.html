{% extends "base.html" %} 

{% block content %}
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li
      data-target="#carouselExampleIndicators"
      data-slide-to="0"
      class="active"
    ></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol>

  <div class="carousel-inner">
    <!-- most recent posts are first -->
    {% for featured_post in featured_posts|reverse %}
      {% if loop.index == 1 %} <!-- most recent post is active post -->
        <div class="carousel-item active">
      {% else %}
        <div class="carousel-item">
      {% endif %}

      <a href="{{url_for('posts.post', post_id=featured_post.id)}}">
        <img
          class="d-block w-100"
          src="{{url_for('static', filename='thumbnails/' + featured_post.thumbnail)}}"
          alt="Slide {{loop.index}}"
        />
      </a>

      <div class="carousel-caption d-none d-md-block">
        <h2 class="tee">{{featured_post.title}}</h2>
      </div>
    </div> <!-- end carousel-item -->
    {% endfor %}
  </div> <!-- end carousel-inner -->

  <a
    class="carousel-control-prev"
    href="#carouselExampleIndicators"
    role="button"
    data-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a
    class="carousel-control-next"
    href="#carouselExampleIndicators"
    role="button"
    data-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div> <!-- end carouselExampleIndicators -->

<!-- container -->
<div class="home-m">
  <!-- row -->
  <div class="row">
    <div class="col-md-9">
      <div class="row">
        <div class="col-lg-10">
          <div class="section-title">
            <h5>Recent Posts</h5>
          </div>
        </div>
        <hr />
        {% for post in posts.items %}
        <div class="col-md-11 col-lg-11">
          <div class="post" data-aos="fade-up">
            <div class="parent">
              <a
                class="post-img"
                href="{{url_for('posts.post', post_id=post.id)}}"
                ><img
                  class="img-div-body"
                  src="{{url_for('static', filename='thumbnails/' + post.thumbnail)}}"
                  alt="post thumbnail"
              /></a>
            </div> <!-- end parent -->
            <div class="post-body">
              <div class="post-meta">
                {% for tag in post.tags %}
                  <a class="post-category" style="background-color: {{tag.colour}};" href="{{url_for('posts.tag_posts', tag_name=tag.name, page=1)}}">{{tag.name}}</a>
                {% endfor %}
                <span class="post-date">
                  {{ post.date_posted.strftime("%B %d, %Y") }}
                </span>

                <span>
                  <a href="{{url_for('users.user_posts', username=post.author.username)}}" class="h-author">{{ post.author.username }}</a>
                </span>
              </div>
              <h3 class="post-title" id="post-t">
                <a href="{{url_for('posts.post', post_id=post.id)}}">{{ post.title }}</a>
              </h3>
            </div> <!-- end post-body -->
          </div> <!-- end class=post -->
        </div> <!-- end col-md-11 -->
        {% endfor %}
      </div> <!-- end row -->
    </div> <!-- end col-md-9 -->
    <div class="col-md-1">
      <div class="row">
        <div class="col-md-12 col-lg-12 d-none d-lg-block cat-block affix">
          <div class="section-title">
            <h3>Categories</h3>
          </div>
          <br />
          <ul class="navbar-nav" style="list-style-type: circle; margin-left: 30px">
            {% for tag in tags %}
              <li class="nav-item">
                <a class="nav-link" href="{{url_for('posts.tag_posts', tag_name=tag.name, page=1)}}">{{tag.name}}</a>
              </li>
            {% endfor %}
          </ul>
        </div> <!-- end col-md-12 -->
      </div> <!-- end row -->
    </div> <!-- end col-md-1 -->
  </div> <!-- end row -->
</div> <!-- end home-m -->
<div class="bg-modal">
  <div class="modal-contents">
    <div class="close">+</div>

    <form action="">
      <h2 class="modal-title">Join Our Mailing List</h2>
      <input class="iinput" type="text" placeholder="Name" id="modal-name" />
      <input
        class="iinput"
        type="email"
        placeholder="E-Mail"
        id="modal-email"
      />
      <button type="button" class="btn btn-light sub-b" id="modal-button">
        Join
      </button>
    </form>
  </div>
</div>

<div class="center-text">
  {% for page_num in posts.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %} 
    {% if page_num %} 
      {% if posts.page == page_num %}
        <a class="btn btn-light mb-4" href="{{url_for('main.home', page=page_num)}}">{{page_num}}</a>
      {% else %}
        <a class="btn btn-outline-light mb-4" href="{{url_for('main.home', page=page_num)}}">{{page_num}}</a>
      {% endif %} 
    {% else %}
      ... 
    {% endif %} 
  {% endfor %}
</div>

{% endblock content %} 

{% block javascript %}
<script>
  AOS.init();
  var fixmeTop = $(".fixme").offset().top;
  $(window).scroll(function () {
    var currentScroll = $(window).scrollTop();
    if (currentScroll >= fixmeTop) {
      $(".fixme").css({
        position: "fixed",
      });
    } else {
      $(".fixme").css({
        position: "static",
      });
    }
  });
</script>
{% endblock javascript %}
